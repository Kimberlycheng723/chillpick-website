<header class="navbar navbar-expand-lg py-3" style="background-color: #EBE8D5;">
  <div class="container-fluid justify-content-between align-items-center px-4">

    <!-- Left Logo -->
    <a class="navbar-brand d-flex align-items-center" href="/">
      <img src="../../images/logo_final.png" alt="ChillPick Logo" style="height: 60px;">
    </a>


    <!-- Toggler for mobile (only show when logged in) -->
<div id="mobileMenuToggle" class="d-lg-none d-none">
  <button class="navbar-toggler border-2 rounded-3 px-2" type="button" data-bs-toggle="collapse"
    data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
</div>
    <!-- Centered Nav Links -->
    <div class="collapse navbar-collapse justify-content-center desktop-center" id="navbarNav">
      <div id="authNav">
        <ul class="navbar-nav flex-row flex-wrap text-center">
          <li class="nav-item"><a class="nav-link nav-custom" href="/">Home</a></li>
          <li class="nav-item"><a class="nav-link nav-custom" href="/dashboard">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link nav-custom" href="/discover">Discover</a></li>
          <li class="nav-item"><a class="nav-link nav-custom" href="/watchlist">Watchlist</a></li>
          <!-- ✅ Mobile profile text link -->
          <li class="nav-item d-lg-none">
            <a href="/account/profile" id="userTextLink" class="nav-link nav-custom d-none">Profile</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Right Auth Buttons -->
    <div class="d-flex align-items-center gap-2">
      <!-- Sign In (logged out) -->
      <a href="/account/login" id="loginLink" class="btn btn-signin d-none">Sign In</a>

      <!-- Profile Icon (logged in) -->
      <a href="/account/profile" id="userIcon" class="d-none">
        <img src="/images/profile_pic.png" alt="Profile" class="rounded-circle" style="height: 48px; width: 48px;">
      </a>
    </div>
  </div> 
</header>

<!-- Bootstrap 5.3.0 JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>


<style>
  .custom-navbar {
    background-color: #f4f2e6;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    padding: 5px 30px;
    height: 80px;
  }

  .nav-custom {
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 18px;
    color: #5c5757;
    text-decoration: none;
    margin: 0 15px;
  }

  .navbar-nav .nav-link {
  display: flex;
  align-items: center;
  height: 100%;
  padding-top: 0;
  padding-bottom: 0;
}


.nav-custom:hover {
  color: #000 !important;
}
.btn-signin {
  background-color: transparent;
  color: #6B4F3D;
  border: 1px solid #6B4F3D;
  border-radius: 50px;
  padding: 8px 20px;
  font-weight: 500;
  transition: background-color 0.3s, color 0.3s;
}

.btn-signin:hover {
  background-color: #6B4F3D;
  color: white;
}


@media (min-width: 992px) {
  .navbar-collapse.desktop-center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }

  .navbar {
    position: relative;
  }
}

/* ✅ Mobile only adjustments */
@media (max-width: 991.98px) {
  #mobileMenuToggle {
    margin-left: auto; /* Push to right */
    display: flex;
    align-items: center;
  }
  .navbar-toggler {
    margin-left: auto;
  }
  #userIcon {
    display: none !important;
  }

  #userTextLink:hover {

    color: white;
  }
}

</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";

    const userIcon = document.getElementById("userIcon");
    const loginLink = document.getElementById("loginLink");
    const authNav = document.getElementById("authNav");

    const userTextLink = document.getElementById("userTextLink");
    const mobileMenuToggle = document.getElementById("mobileMenuToggle");

if (isLoggedIn) {
  if (mobileMenuToggle) mobileMenuToggle.classList.remove("d-none");
} else {
  if (mobileMenuToggle) mobileMenuToggle.classList.add("d-none");
}
if (isLoggedIn) {
  if (userIcon) userIcon.classList.remove("d-none");
  if (userTextLink) userTextLink.classList.remove("d-none");
  if (loginLink) loginLink.classList.add("d-none");
} else {
  if (userIcon) userIcon.classList.add("d-none");
  if (userTextLink) userTextLink.classList.add("d-none");
  if (loginLink) loginLink.classList.remove("d-none");
}
    if (isLoggedIn) {
      // ✅ Show profile icon
      if (userIcon) userIcon.classList.remove("d-none");
      // ❌ Hide Sign In button
      if (loginLink) loginLink.classList.add("d-none");
      // ✅ Show nav
      if (authNav) authNav.style.display = "block";

      // 🔁 Load custom profile picture if exists
      const currentUserEmail = localStorage.getItem("currentUser");
      if (currentUserEmail) {
        const profileData = JSON.parse(localStorage.getItem(`profile_${currentUserEmail}`)) || {};
        const profilePicUrl = profileData.profilePicture;
        const img = userIcon?.querySelector("img");
        if (profilePicUrl && img) img.src = profilePicUrl;
      }
    } else {
      // ❌ Hide profile icon
      if (userIcon) userIcon.classList.add("d-none");
      // ✅ Show Sign In button
      if (loginLink) loginLink.classList.remove("d-none");
      // ❌ Hide nav
      if (authNav) authNav.style.display = "none";
    }

    // 📱 Collapse mobile menu on link click
    document.querySelectorAll(".navbar-nav .nav-link").forEach(link => {
      link.addEventListener("click", () => {
        const toggler = document.querySelector(".navbar-toggler");
        const collapse = document.querySelector(".navbar-collapse");
        if (toggler && collapse.classList.contains("show")) {
          toggler.click();
        }
      });
    });
  });
</script>

<!-- Bootstrap JavaScript Bundle with Popper -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> -->
